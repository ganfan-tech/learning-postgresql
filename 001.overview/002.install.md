# å®‰è£… PostgreSQL

## åœ¨ Ubuntu ä¸Šå®‰è£… PostgreSQL

ç‰¹åˆ«ç®€å•ï¼Œä¸€è¡Œå‘½ä»¤æå®šï¼Œè¿™é‡Œå®‰è£…çš„ç‰ˆæœ¬æ˜¯ 14

```bash
sudo apt install postgresql postgresql-client
```

PostgreSQL è·Ÿå…¶ä»–æ•°æ®åº“ä¸€æ ·æ˜¯å…¸å‹çš„ C/S ç»“æ„ï¼Œä½¿ç”¨ apt å®‰è£… PostgreSQL ä»¥åï¼Œè‡ªåŠ¨ä¼šå¯åŠ¨æœåŠ¡ï¼Œæˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹çŠ¶æ€ï¼Œ`systemctl status postgresql`

```bash
$ systemctl status postgresql
â— postgresql.service - PostgreSQL RDBMS
     Loaded: loaded (/lib/systemd/system/postgresql.service; enabled; vendor preset: enabled)
     Active: active (exited) since Thu 2023-10-26 20:49:04 CST; 1h 1min ago
    Process: 9064 ExecStart=/bin/true (code=exited, status=0/SUCCESS)
   Main PID: 9064 (code=exited, status=0/SUCCESS)
        CPU: 1ms

Oct 26 20:49:04 VM-24-8-ubuntu systemd[1]: Starting PostgreSQL RDBMS...
Oct 26 20:49:04 VM-24-8-ubuntu systemd[1]: Finished PostgreSQL RDBMS.


# å¯ä»¥çœ‹åˆ°æˆ‘ä»¬å®‰è£…çš„ç‰ˆæœ¬
$ psql --version
psql (PostgreSQL) 14.9 (Ubuntu 14.9-0ubuntu0.22.04.1)
```

å®‰è£…å®Œæ¯•åï¼Œç³»ç»Ÿä¼šåˆ›å»ºä¸€ä¸ªæ•°æ®åº“è¶…çº§ç”¨æˆ· postgresï¼Œå¯†ç ä¸ºç©ºã€‚

- åˆ‡æ¢åˆ° postgres ç”¨æˆ·ä¸‹
- psql å‘½ä»¤å¯åŠ¨ clientï¼Œè¿›å…¥äº¤äº’ç¨‹åº
- è¾“å…¥ `\q` é€€å‡ºäº¤äº’ç¨‹åº

```bash
ubuntu@VM:~$ sudo -i -u postgres

postgres@VM:~$ psql
psql (14.10 (Ubuntu 14.10-0ubuntu0.22.04.1))
Type "help" for help.

postgres=# \q
```

è¾“å…¥ä»¥ä¸‹å‘½ä»¤é€€å‡º PostgreSQL æç¤ºç¬¦ï¼š

```bash
\q
```

## åœ¨ macOS ä¸Šå®‰è£… PostgreSQL

### ä½¿ç”¨ brew å®‰è£… postgresql@14

```bash

# å®‰è£…

$ brew install postgresql@14
==> /opt/homebrew/Cellar/postgresql@14/14.10_1/bin/initdb --locale=C -E UTF-8 /opt/homebrew/var/postgresql@14
==> Caveats
This formula has created a default database cluster with:
  initdb --locale=C -E UTF-8 /opt/homebrew/var/postgresql@14
For more details, read:
  https://www.postgresql.org/docs/14/app-initdb.html

To start postgresql@14 now and restart at login:
  brew services start postgresql@14
Or, if you don't want/need a background service you can just run:
  /opt/homebrew/opt/postgresql@14/bin/postgres -D /opt/homebrew/var/postgresql@14
==> Summary
ğŸº  /opt/homebrew/Cellar/postgresql@14/14.10_1: 3,317 files, 46MB
==> Running `brew cleanup postgresql@14`...
Disable this behaviour by setting HOMEBREW_NO_INSTALL_CLEANUP.
Hide these hints with HOMEBREW_NO_ENV_HINTS (see `man brew`).

```

### å¯åŠ¨æœåŠ¡ï¼ŒæŸ¥çœ‹æœåŠ¡è£…æ€

```bash
$ brew services start postgresql@14
==> Successfully started `postgresql@14` (label: homebrew.mxcl.postgresql@14)

$ brew services info postgresql@14
postgresql@14 (homebrew.mxcl.postgresql@14)
Running: âœ”
Loaded: âœ”
Schedulable: âœ˜
User: abang
PID: 18906

```

### å®‰è£…åç»­

macOSä¸Šä¸ä¼šåƒLinuxä¸€æ ·åˆ›å»ºç”¨æˆ·ï¼Œè€Œæ˜¯åœ¨å½“å‰ç”¨æˆ·ä½œä¸ºpostgresqlçš„é»˜è®¤è¶…çº§ç”¨æˆ·ï¼Œè‡ªå¸¦æ•°æ®çš„æ‰€æœ‰è€…å°±æ˜¯å½“å‰ç”¨æˆ·

```bash
# æŒ‡å®šæ•°æ®åº“postgres

psql -d postgres
psql (14.9 (Homebrew))
Type "help" for help.

# æŸ¥çœ‹æ•°æ®åº“åˆ—è¡¨
postgres=# \l
                          List of databases
   Name    |  Owner  | Encoding | Collate | Ctype | Access privileges
-----------+---------+----------+---------+-------+-------------------
 postgres  | abang  | UTF8     | C       | C     |
 template0 | abang  | UTF8     | C       | C     | =c/abang        +
           |        |          |         |       | abang=CTc/abang
 template1 | abang  | UTF8     | C       | C     | =c/abang        +
           |        |          |         |       | abang=CTc/abang
(4 rows)

postgres=#
```
